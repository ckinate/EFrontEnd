<div
    bsModal
    bsModal
    #modal="bs-modal"
    (onShown)="onShown()"
    class="modal fade"
    tabindex="-1"
    role="dialog"
    aria-hidden="true"
    [config]="{ backdrop: 'static' }"
>
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Cash Advance Setup</h5>
                <button
                    type="button"
                    class="close"
                    (click)="close()"
                    [attr.aria-label]="l('Close')"
                >
                    <i aria-hidden="true" class="ki ki-close icon-2x"></i>
                </button>
            </div>

            <div class="modal-body">
                <form #caSetupForm="ngForm" (ngSubmit)="save(caSetupForm)">
                    <div class="row align-items-center mb-2">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="GroupName">{{
                                    "Request Type" | localize
                                }}</label>
                                <input
                                    id="ttrans"
                                    type="text"
                                    [(ngModel)]="caSetup.transactionType"
                                    name="TransactionType"
                                    required
                                    pattern="^[^\*\=\<\>]+$"
                                    class="form-control"
                                />
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="GroupName">{{
                                    "Number of Days to notify users for retirement?"
                                        | localize
                                }}</label>
                                <input
                                    id="Number"
                                    type="number"
                                    [(ngModel)]="caSetup.numberDays"
                                    min="0"
                                    oninput="validity.valid||(value=value.replace(/\D+/g, ''))"
                                    name="NumberDays"
                                    required
                                    class="form-control"
                                />
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="GroupName">{{
                                    "Maximium Amount" | localize
                                }}</label>

                                <br />
                                <p-inputNumber
                                    min="0"
                                    max="9999999999999"
                                    [minFractionDigits]="2"
                                    [maxFractionDigits]="2"
                                    name="amout"
                                    [(ngModel)]="caSetup.maximumAmount"
                                    mode="decimal"
                                ></p-inputNumber>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-check">
                                <input
                                    class="form-check-input"
                                    type="checkbox"
                                    name="flexRadioDefaultPay"
                                    id="flexRadioDefault1"
                                    [(ngModel)]="caSetup.applyDaysRequisition"
                                    (change)="changeOnDaysReq()"
                                />
                                <label
                                    class="form-check-label"
                                    for="flexRadioDefault1"
                                >
                                    Notify users of retirement
                                    {{ caSetup.numberDays }} day(s) after cash
                                    advance initiation date
                                </label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-check">
                                <input
                                    class="form-check-input"
                                    type="checkbox"
                                    name="flexRadioDefault"
                                    id="flexRadioDefault2"
                                    [(ngModel)]="caSetup.applyDaysPayment"
                                    (change)="changeOnDaysPay()"
                                />
                                <label
                                    class="form-check-label"
                                    for="flexRadioDefault2"
                                >
                                    Notify users of retirement
                                    {{ caSetup.numberDays }} day(s) after cash
                                    advance payment date
                                </label>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <div class="modal-footer">
                <div class="form-group">
                    <app-erms-button
                        [title]="'Save' | localize"
                        [buttonBusy]="saving"
                        [busyText]="l('SavingWithThreeDot')"
                        [disabled]="!caSetupForm.form.valid"
                        (click)="save(caSetupForm)"
                        action="submit"
                        type="others"
                        icon="<i class='fa fa-plus'></i>"
                    ></app-erms-button>
                </div>

                <app-erms-button
                    [title]="'Cancel' | localize"
                    action="button"
                    (click)="close()"
                    type="cancel"
                ></app-erms-button>
            </div>
        </div>
    </div>
</div>
