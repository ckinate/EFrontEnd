<div [@routerTransition]  >

    <div class="content d-flex flex-column flex-column-fluid">

        <sub-header [title]="'Budget Upload' | localize">

        </sub-header>





      <div [class]="containerClass">
        <div class="card card-custom ">
            <div class="card-body">


                <tabset>
                    <tab heading="Budget Requisition Page">
<br>
<br>
                    <!-- <form #accrualreqForm="ngForm"  (ngSubmit)="readExcel()"> -->
                        <form   #budgetUpload = "ngForm" (ngSubmit) = "uploadedFile(budgetUpload)">


                            <div class="row form-group">
                                <div class="col-md-8">

                                    <input
                                        type="file"
                                        #uploadItem
                                        class="form-control"
                                        placeholder="Upload file"
                                        name="BudgetUploadItem"
                                        [(ngModel)] = "Budgetuploaded"

                                        accept=".xlsx"
                                        required
                                    />
                                </div>

                                <div class="col-md-2">
                                    <a

                                        target="_blank"
                                        href="{{
                                            templateUrl
                                        }}"
                                    >
                                        {{ "View Template" | localize }}
                                    </a>
                                </div>
                                <div class="col-md-2">
                                    <div *ngIf="!saving">
                                        <!-- <button type="submit" class="btn btn-primary rounded"
                                          [disabled]="!Budgetuploaded ||Budgetuploaded.length == 0 && !budgetUpload.form.valid ">
                                            <i class="fa fa-upload"></i>
                                            <span>{{"Upload Budget"|localize}}</span>
                                        </button> -->

                                        <app-erms-button 
                                        [title]="'Upload Budget' | localize"
                                        [disabled]="!Budgetuploaded ||Budgetuploaded.length == 0 && !budgetUpload.form.valid "
                                        action = "submit"
                                        type="download"
                                    ></app-erms-button>
                                    </div>
                                    <div *ngIf = "saving">
                                        <button type="button"
                                        class="btn btn-primary rounded"  [disabled]="true" >
                                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                                        {{l('SavingWithThreeDot')}}
                                        </button>
                                    </div>
                                </div>

                            </div>

                        </form>


                        <br>
                        <br>


                        <div class="row align-items-center">
                            <!--<Primeng-TurboTable-Start>-->
                        <div class="primeng-datatable-container"
                            [busyIf]="primengTableHelper.isLoading">

                            <p-table #dataTable
                            [value]="records"

        rows="{{primengTableHelper.defaultRecordsCountPerPage}}" [paginator]="true" [rows]="10" [rowsPerPageOptions]="[5,10,15,20]" [lazy]="false" [rowHover]="true" sortMode="multiple" [scrollable]="true"
        ScrollWidth="100%" [responsive]="primengTableHelper.isResponsive" [resizableColumns]="primengTableHelper.resizableColumns"
        [globalFilterFields] ="['misCode', 'budgetAmount', 'budgetPeriod', 'gl', 'activity']">
        <ng-template  pTemplate="caption">

            <div style="text-align: right">
                <i class="pi pi-search" style="margin:4px 4px 0 0"></i>
                <input type="text" pInputText size="30" placeholder="Search Keyword" style="width:auto" (input)="dataTable.filterGlobal($event.target.value, 'contains')">
            </div>
        </ng-template>

                                <ng-template pTemplate="header">
                                    <tr>

                                        <th  style="width: 100px">
                                            {{'Actions' | localize}}
                                        </th>
                                        <th style="width: 100px" pSortableColumn="misCode ">{{"MisCode"|localize}} <p-sortIcon field="misCode "></p-sortIcon></th>
                                        <th style="width: 100px" pSortableColumn="budgetAmount">{{"Budget Amount"|localize}} <p-sortIcon field="budgetAmount"></p-sortIcon></th>
                                        <th style="width: 100px" pSortableColumn="budgetPeriod">{{"Budget Period"|localize}} <p-sortIcon field="budgetPeriod"></p-sortIcon></th>
                                        <th style="width: 100px" pSortableColumn="gl">{{"GL"|localize}} <p-sortIcon field="gl"></p-sortIcon></th>
                                        <th style="width: 100px" pSortableColumn="activity">{{"Activity"|localize}} <p-sortIcon field="activity"></p-sortIcon></th>

                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-record="$implicit">
                                    <tr>
                                            <td style="width: 100px">
                                                <div class="btn-group dropdown" dropdown container="body">
                                                    <button dropdownToggle class="dropdown-toggle btn btn-sm btn-primary">
                                                    <i class="fa fa-cog"></i><span class="caret"></span>
                                                    {{"Actions" | localize}}
                                                </button>
                                                    <ul class="dropdown-menu" *dropdownMenu>
                                                        <!-- <li>
                                                            <a href="javascript:;" (click)="edit(record)">{{'Edit' | localize}}</a>
                                                        </li> -->
                                                        <li>
                                                            <a href="javascript:;" (click)="delete(record)">{{'Delete' | localize}}</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </td>
                                            <td style="width: 100px">
                                                <span class="ui-column-title"> {{'Description' | localize}}</span>
                                                {{record.misCode    }}
                                            </td>
                                            <td style="width: 100px">
                                                <span class="ui-column-title"> {{'Rate' | localize}}</span>
                                                {{record.budgetAmount | number:'1.2-5'}}

                                            </td>
                                            <td style="width: 100px">
                                                <span class="ui-column-title"> {{'Rate' | localize}}</span>
                                                {{record.budgetPeriod}}

                                            </td>

                                            <!-- <td style="width: 100px">
                                                <span class="ui-column-title"> {{'Rate' | localize}}</span>
                                                {{record.budgetYear}}

                                            </td> -->

                                            <td style="width: 100px">
                                                <span class="ui-column-title"> {{'Rate' | localize}}</span>
                                                {{record.gl}}

                                            </td>
                                            <td style="width: 100px">
                                                <span class="ui-column-title"> {{'Rate' | localize}}</span>
                                                {{record.activity}}

                                            </td>




                                    </tr>
                                </ng-template>
                            </p-table>

                                <!-- <div class="primeng-paging-container">
                                    <p-paginator [rows]="primengTableHelper.defaultRecordsCountPerPage"
                                        #paginatorAuditLogs
                                        [totalRecords]="primengTableHelper.totalRecordsCount"
                                        [rowsPerPageOptions]="primengTableHelper.predefinedRecordsCountPerPage">
                                    </p-paginator>

                                </div> -->
                        </div>
                            <!--<Primeng-TurboTable-End>-->

                        </div>

<br>
<br>
<div class=" row col-md-12">
    <div class="col-md-6 mt-10 text-left">
        <div class="form-group">
            <!-- <button type="button" class="btn btn-primary rounded" (click)="deleteAll()"  [disabled]=" initiateButtonDisable" ><i   class="fa fa-save"></i>
                <span>{{"Delete All" | localize}}</span>
            </button> -->

            <app-erms-button 
            [title]="'Delete All' | localize"
            [disabled]=" initiateButtonDisable"
            (click)="deleteAll()"
            type="error"
        ></app-erms-button>
        </div>
    </div>
    <div class="col-md-6 mt-10 text-right">
        <div class="form-group">
            <!-- <button type="button" class="btn btn-primary rounded" (click)="sendForApproval()"  [disabled]=" initiateButtonDisable" ><i   class="fa fa-save"></i>
                <span>{{"Send For Approval" | localize}}</span>
            </button> -->

            <app-erms-button 
            [title]="'Send For Approval' | localize"
            [disabled]=" initiateButtonDisable"
            (click)="sendForApproval()"
            type="authorize"
        ></app-erms-button>
        </div>
    </div>
</div>
                        
                    </tab>
                    <tab  heading="View Budgets">
                            <app-bugetviewdetails></app-bugetviewdetails>
                    </tab>

                </tabset>


            </div>
        </div>
    </div>






</div>


